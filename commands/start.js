const { Telegraf } = require("telegraf");
const mainMenu = require("./mainMenu"); // –Ü–º–ø–æ—Ä—Ç—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é mainMenu
const path = require("path");

module.exports = (bot) => {
  bot.start((ctx) => {
    // –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–¥—Å–∏–ª–∞—î–º–æ —Ç–µ–∫—Å—Ç
    ctx.reply("üëã –í—ñ—Ç–∞—î–º–æ –≤ –Ω–∞—à—ñ–π —à–∫–æ–ª—ñ —ñ—Å–ø–∞–Ω—Å—å–∫–æ—ó –º–æ–≤–∏! üéâ –¢—É—Ç —Ç–∏ –∑–Ω–∞–π–¥–µ—à —É—Å–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–µ, —â–æ–± –≤–∏–≤—á–∞—Ç–∏ —Ü—é –ø—Ä–µ–∫—Ä–∞—Å–Ω—É –º–æ–≤—É –≤–µ—Å–µ–ª–æ —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. üá™üá∏ –ú–∏ –ø—ñ–¥–≥–æ—Ç—É–≤–∞–ª–∏ –¥–ª—è —Ç–µ–±–µ –∫—É—Ä—Å–∏, —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É. –î–∞–≤–∞–π —Ä–æ–∑–ø–æ—á–Ω–µ–º–æ —Ü—é –ø—Ä–∏–≥–æ–¥—É —Ä–∞–∑–æ–º! üöÄ")
      .then(() => {
        // –í–∫–∞–∑—É—î–º–æ —à–ª—è—Ö –¥–æ –≤—ñ–¥–µ–æ –≤ –ø–∞–ø—Ü—ñ "videos" (–ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤—ñ–¥–µ–æ —î —É –≤–∞—à—ñ–π –ø–∞–ø—Ü—ñ –ø—Ä–æ–µ–∫—Ç—É)
        const videoPath = path.join(__dirname, "video", "welcome.mp4");
        console.log(videoPath)

        // –ù–∞–¥—Å–∏–ª–∞—î–º–æ –≤—ñ–¥–µ–æ
        ctx.replyWithVideo({ source: videoPath }).then(() => {
          // –ü—ñ—Å–ª—è –≤—ñ–¥–µ–æ –Ω–∞–¥—Å–∏–ª–∞—î–º–æ –º–µ–Ω—é
          ctx.reply("–û–±–µ—Ä—ñ—Ç—å, —â–æ —Ö–æ—á–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ:", mainMenu());
        });
      });
  });
};
