// const { Telegraf } = require("telegraf");
// https://t.me/EspanolConDiana_bot
// const bot = new Telegraf("8072199106:AAEMULXtqKgDhfEaGmNLwWv2D7ELTZSDY6E");

const { Telegraf, Markup } = require("telegraf");

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç–∞no
const bot = new Telegraf("8072199106:AAEMULXtqKgDhfEaGmNLwWv2D7ELTZSDY6E");

// –ö–æ–º–∞–Ω–¥–∞ /start
bot.start((ctx) => {
  ctx.reply(
    "–í—ñ—Ç–∞—é –≤–∞—Å —É —à–∫–æ–ª—ñ ESPAcio! –û–±–µ—Ä—ñ—Ç—å –æ–¥–Ω—É –∑ –æ–ø—Ü—ñ–π:",
    Markup.keyboard([
      ["–¢–µ—Å—Ç üìù", "–ü—Ä–æ —à–∫–æ–ª—É ‚ÑπÔ∏è"], // –ø–µ—Ä—à–∏–π —Ä—è–¥ –∫–Ω–æ–ø–æ–∫
      ["–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é üìÖ", "–ó–∞–ª–∏—à–∏—Ç–∏ –∑–∞—è–≤–∫—É üì®"], // –¥—Ä—É–≥–∏–π —Ä—è–¥ –∫–Ω–æ–ø–æ–∫
    ]).resize() // –†–æ–±–∏—Ç—å –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—é –¥–æ –µ–∫—Ä–∞–Ω–∞
  );
});

// –û–±—Ä–æ–±–∫–∞ –≤–∏–±–æ—Ä—É "–¢–µ—Å—Ç"
bot.hears("–¢–µ—Å—Ç üìù", (ctx) => {
  ctx.reply(
    "–û–±–µ—Ä—ñ—Ç—å —Ç–µ—Å—Ç, —è–∫–∏–π –≤–∞–º —Ü—ñ–∫–∞–≤–∏–π:\n1. –¢–µ—Å—Ç –Ω–∞ —Ä—ñ–≤–µ–Ω—å A1\n2. –¢–µ—Å—Ç –Ω–∞ —Ä—ñ–≤–µ–Ω—å A2..."
  );
  // –î–∞–ª—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –¥–ª—è —Ç–µ—Å—Ç—É
});

// –û–±—Ä–æ–±–∫–∞ –≤–∏–±–æ—Ä—É "–ü—Ä–æ —à–∫–æ–ª—É"
bot.hears("–ü—Ä–æ —à–∫–æ–ª—É ‚ÑπÔ∏è", (ctx) => {
  ctx.reply(
    "–®–∫–æ–ª–∞ ESPAcio –ø—Ä–æ–ø–æ–Ω—É—î –∑–∞–Ω—è—Ç—Ç—è –∑ —ñ—Å–ø–∞–Ω—Å—å–∫–æ—ó –º–æ–≤–∏ –∑ –¥–æ—Å–≤—ñ–¥—á–µ–Ω–∏–º–∏ –≤–∏–∫–ª–∞–¥–∞—á–∞–º–∏..."
  );
  // –ú–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —à–∫–æ–ª—É
});

// –û–±—Ä–æ–±–∫–∞ –≤–∏–±–æ—Ä—É "–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é"
bot.hears("–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é üìÖ", (ctx) => {
  ctx.reply(
    "–©–æ–± –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é, –±—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞–¥—ñ—à–ª—ñ—Ç—å –Ω–∞–º —Å–≤–æ—î —ñ–º‚Äô—è —Ç–∞ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É."
  );
  // –î–∞–ª—ñ –º–æ–∂–Ω–∞ –æ–±—Ä–æ–±–ª—è—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ –¥–∞–Ω—ñ
});

const channelId = "@nafnafchik"; // –ó–∞–º—ñ–Ω–∏ –Ω–∞ ID —Ç–≤–æ–≥–æ –∫–∞–Ω–∞–ª—É

bot.hears("–ó–∞–ª–∏—à–∏—Ç–∏ –∑–∞—è–≤–∫—É üì®", (ctx) => {
  ctx.reply(
    "–ó–∞–ª–∏—à—Ç–µ, –±—É–¥—å –ª–∞—Å–∫–∞, —Å–≤–æ—é –∑–∞—è–≤–∫—É —É —Ñ–æ—Ä–º–∞—Ç—ñ:\n1. –Ü–º'—è\n2. –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω\n3. –ö–æ–º–µ–Ω—Ç–∞—Ä (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)"
  );

  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Å—Ç–∞–Ω –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–±—Ä–æ–±–∫–∏ –∑–∞—è–≤–∫–∏
  ctx.session.state = "awaiting_application";
});

// –û–±—Ä–æ–±–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–∞—è–≤–∫–∏
bot.on("text", (ctx) => {
  if (ctx.session.state === "awaiting_application") {
    // –û—Ç—Ä–∏–º—É—î–º–æ —Ç–µ–∫—Å—Ç –∑–∞—è–≤–∫–∏
    const application = ctx.message.text;

    // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –∑–∞—è–≤–∫—É –¥–æ –∫–∞–Ω–∞–ª—É
    bot.telegram.sendMessage(channelId, `–ù–æ–≤–∞ –∑–∞—è–≤–∫–∞:\n${application}`);

    ctx.reply("–î—è–∫—É—î–º–æ! –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞–¥—ñ—Å–ª–∞–Ω–∞.");
    ctx.session.state = null; // –°–∫–∏–¥–∞—î–º–æ —Å—Ç–∞–Ω
  }
});

// –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
bot.launch();
